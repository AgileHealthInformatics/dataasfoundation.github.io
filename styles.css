/* ==========================================================
   Data as Foundation – Full CSS (TOC on, image left, no overlap)
   ========================================================== */

/* ---------- Base Typography ---------- */
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.6;
  color: var(--bs-body-color);
  background-color: var(--bs-body-bg);
}
h1, h2, h3, h4 {
  font-weight: 600;
  color: var(--bs-heading-color, var(--bs-body-color));
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}
p { margin-bottom: 1rem; }
.lead { font-size: 1.15rem; }

/* ==========================================================
   NAVBAR – Light/Dark Responsive
   ========================================================== */
nav.navbar[data-bs-theme="dark"] { background-color: inherit !important; color: inherit !important; }

/* Light mode */
[data-bs-theme="light"] nav.navbar {
  background-color: #ffffff !important; color: #0b3b46 !important;
  border-bottom: 1px solid rgba(0,0,0,0.1); min-height: 60px;
}
[data-bs-theme="light"] .navbar .navbar-brand,
[data-bs-theme="light"] .navbar .nav-link { color: #0b3b46 !important; font-weight: 600; }
[data-bs-theme="light"] .navbar .nav-link:hover,
[data-bs-theme="light"] .navbar .nav-link:focus { color: #005f73 !important; }

/* Dark mode */
[data-bs-theme="dark"] nav.navbar {
  background-color: #121212 !important; color: #f8f9fa !important;
  border-bottom: 1px solid #333; min-height: 60px;
}
[data-bs-theme="dark"] .navbar .navbar-brand,
[data-bs-theme="dark"] .navbar .nav-link { color: #f8f9fa !important; font-weight: 600; }
[data-bs-theme="dark"] .navbar .nav-link:hover,
[data-bs-theme="dark"] .navbar .nav-link:focus { color: #66b2ff !important; }

.navbar .container-fluid, .navbar .navbar-container { min-height: 60px; align-items: center; }

/* ==========================================================
   PAGE GRID (content + TOC) — left-aligned & space for cover
   ========================================================== */
.page-columns {
  position: relative;                 /* anchor for the absolute cover */
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(260px, 300px); /* content | TOC */
  column-gap: 3rem;

  /* make the page use the whole width and start at the left */
  max-width: 100vw;
  margin-left: 0;
  margin-right: auto;
  justify-content: start;

  /* *** reserve space for the cover image on the far left *** */
  padding-left: 230px;  /* cover width (180) + gutter (~40) + edge (~10) */
  padding-right: 1rem;
}
#quarto-margin-sidebar { grid-column: 2; }

/* Stack on small screens */
@media (max-width: 991px) {
  .page-columns {
    display: block;
    padding-left: 1rem;   /* no reserved space; cover stacks above */
    padding-right: 1rem;
    max-width: 95vw;
  }
}

/* ==========================================================
   MAIN CONTENT (no extra left padding here)
   ========================================================== */
main.content, #quarto-document-content {
  max-width: 85vw;  /* up to ~85% of viewport */
  width: 85vw;
  margin-left: 0;   /* start near the left edge */
  margin-right: auto;
  position: relative;
  padding-left: 0;  /* IMPORTANT: no double padding — grid handles it */
  padding-right: 0;
}

/* Slightly relax at very wide widths */
@media (max-width: 1400px) {
  main.content, #quarto-document-content { max-width: 90vw; width: 90vw; }
}
@media (max-width: 991px) {
  main.content, #quarto-document-content { max-width: 95vw; width: 95vw; }
}

/* ==========================================================
   BOOK COVER — fixed at far left, no overlap
   ========================================================== */
.book-cover-left {
  position: absolute;
  top: 1.5rem;
  left: 0.75rem;     /* close to browser edge */
  z-index: 5;
  text-align: center;
}
.book-cover-left img {
  width: 180px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.25);
  transition: transform 0.2s ease;
}
.book-cover-left img:hover { transform: scale(1.03); }
.book-cover-left p {
  margin-top: 0.3rem; font-size: 0.9rem;
  color: var(--bs-secondary-color, var(--bs-body-color));
}

/* On small screens, stack image above text */
@media (max-width: 991px) {
  .book-cover-left {
    position: relative; left: 0; text-align: center; margin-bottom: 1rem;
  }
  .book-cover-left img { width: 60%; margin: 0 auto; }
}

/* ==========================================================
   LINKS (incl. Amazon) — theme aware
   ========================================================== */
a { color: var(--bs-link-color, #0b3b46); text-decoration: none; font-weight: 500; }
a:hover { color: var(--bs-link-hover-color, #005f73); text-decoration: underline; }
[data-bs-theme="dark"] a { color: #66b2ff; }
[data-bs-theme="dark"] a:hover { color: #a7d3ff; }

/* ==========================================================
   SUBTITLES
   ========================================================== */
.quarto-title-block .quarto-subtitle, .quarto-title .subtitle {
  color: var(--bs-secondary-color, var(--bs-body-color));
  font-size: 1.15rem; margin-top: 0.25rem;
}
[data-bs-theme="dark"] .quarto-title-block .quarto-subtitle,
[data-bs-theme="dark"] .quarto-title .subtitle { color: #e9ecef; opacity: 0.95; }

/* ==========================================================
   FOOTER
   ========================================================== */
footer, .page-footer {
  font-size: 0.9rem; color: var(--bs-secondary-color, var(--bs-body-color));
  border-top: 1px solid var(--bs-border-color, #ddd);
  padding-top: 0.75rem; margin-top: 2rem;
}
.page-footer a { color: var(--bs-link-color, #0b3b46); }
.page-footer a:hover { text-decoration: underline; }

/* ==========================================================
   IMAGE DEFAULTS
   ========================================================== */
img { max-width: 100%; height: auto; border: none; }
